"use strict";var TicTacToe=function(){var t=$("#status"),e="",a="",r="",i=null,s=0,n=null,c=[],o=[1,2,3,4,5,6,7,8,9],m=[2,4,6,8],h=[1,3,7,9],k=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]],l=function(){return{1:{rows:[0,3,6],marker:"-"},2:{rows:[0,4],marker:"-"},3:{rows:[0,5,7],marker:"-"},4:{rows:[1,3],marker:"-"},5:{rows:[1,4,6,7],marker:"-"},6:{rows:[1,5],marker:"-"},7:{rows:[2,3,7],marker:"-"},8:{rows:[2,4],marker:"-"},9:{rows:[2,5,6],marker:"-"}}},p={};return{moveRandomly:function(){var t=o[Math.floor(Math.random()*o.length)];this.markSpace(a,t)},cpuTurn:function(){if("easy"===r)this.moveRandomly();else switch(s){case 1:this.markSpace(a,5);break;case 2:var t=n;switch(t){case 1:case 3:case 7:case 9:this.markSpace(a,5);break;case 2:this.markSpace(a,1);break;case 4:this.markSpace(a,7);break;case 6:this.markSpace(a,3);break;case 8:this.markSpace(a,9);break;case 5:this.markSpace(a,7)}break;case 3:var e=n;if(p[5].marker===a&&this.isEdge(e))switch(e){case 2:this.markSpace(a,7);break;case 4:this.markSpace(a,9);break;case 6:this.markSpace(a,1);break;case 8:this.markSpace(a,3)}if(p[5].marker===a&&this.isCorner(e))switch(e){case 1:this.markSpace(a,9);break;case 3:this.markSpace(a,7);break;case 7:this.markSpace(a,3);break;case 9:this.markSpace(a,1)}break;case 4:5===c[0]?this.attemptBlock()||this.attemptTriangle():this.isCorner(c[0])?this.attemptBlock()||this.markSpace(a,4):this.attemptBlock()||this.markSpace(a,5);break;case 5:this.isEdge(c[1])?this.attemptWin()||this.attemptBlock():this.attemptBlock()||this.attemptTriangle();break;case 6:5===c[0]?this.attemptWin()||this.attemptBlock()||this.attemptSetup():this.isCorner(c[0])?this.attemptWin()||this.attemptBlock()||this.attemptSetup()||this.moveRandomly():this.attemptWin()||this.attemptBlock()||this.attemptSetup();break;case 7:this.isEdge(c[1])?this.attemptWin()||this.attemptBlock():this.isCorner(c[3])?this.attemptWin()||this.attemptBlock()||this.attemptSetup():this.attemptWin();break;case 8:5===c[0]?this.attemptWin()||this.attemptBlock()||this.moveRandomly():this.isCorner(c[0])?this.attemptWin()||this.attemptBlock()||this.moveRandomly():this.attemptWin()||this.attemptBlock()||this.moveRandomly();break;case 9:this.moveRandomly()}},attemptTriangle:function(){for(var t=null,e=0;e<=7;e++)if(t=null,p[k[e][0]].marker===a&&"-"===p[k[e][1]].marker&&"-"===p[k[e][2]].marker&&(t=k[e][2]),"-"===p[k[e][0]].marker&&"-"===p[k[e][1]].marker&&p[k[e][2]].marker===a&&(t=k[e][0]),null!==t)return this.markSpace(a,t),!0;return!1},attemptSetup:function(){for(var t=0,e=0,r=null,i=0;i<=7;i++){t=0,e=0,r=null;for(var s=0;s<=2;s++)p[k[i][s]].marker===a?t++:"-"===p[k[i][s]].marker&&(r=k[i][s],e++);if(1===t&&2===e)return this.markSpace(a,r),!0}return!1},attemptWin:function(){for(var t=0,e=null,r=0;r<=7;r++){t=0,e=null;for(var i=0;i<=2;i++)p[k[r][i]].marker===a?t++:"-"===p[k[r][i]].marker&&(e=k[r][i]);if(2===t&&null!==e)return this.markSpace(a,e),!0}return!1},attemptBlock:function(){for(var t=0,r=null,i=0;i<=7;i++){t=0,r=null;for(var s=0;s<=2;s++)p[k[i][s]].marker===e?t++:"-"===p[k[i][s]].marker&&(r=k[i][s]);if(2===t&null!==r)return this.markSpace(a,r),!0}return!1},isCorner:function(t){return h.indexOf(t)!==-1},isEdge:function(t){return m.indexOf(t)!==-1},checkRow:function(e){var r=k[e],s=p[r[0]].marker,n=p[r[1]].marker,c=p[r[2]].marker;if(s===n&&s===c){s===a?t.text("You lose!"):t.text("You win!");for(var o=0;o<3;o++)$("#space-"+r[o]).find("span").css({color:"#ee6e73"});i=null}},markSpace:function(e,a){s++,n=a,c.push(n),p[a].marker=e,$("#space-"+a).find("span").text(e),o.splice(o.indexOf(a),1);for(var r=p[a].rows,m=0,h=r.length;m<h;m++)this.checkRow(r[m]);"player"===i?(this.disableHover(),i="cpu",0===o.length?(t.text("NOBODY WINS"),i=null):(t.text("Thinking..."),this.cpuTurn())):"cpu"===i?0===o.length?(t.text("NOBODY WINS"),i=null):(this.enableHover(),i="player",t.text("Your turn")):null===i&&this.disableHover()},enableHover:function(){for(var t=1;t<=9;t++)"-"===p[t].marker&&$("#space-"+t).addClass("space-hover")},disableHover:function(){for(var t=1;t<=9;t++)$("#space-"+t).removeClass("space-hover")},getPlayerMarker:function(){return e},isLegalMove:function(t){return o.indexOf(t)!==-1},canMove:function(){return"player"===i},printCurrentBoard:function(){for(var t="",e=1;e<=9;e++)t+=p[e].marker,e%3===0&&(t+="\n");console.log(t)},newGame:function(m,h,k,u){p=new l,o=[1,2,3,4,5,6,7,8,9],s=1,n=null,c=[],r=m,e=h,a=k;for(var f=1;f<=9;f++)$("#space-"+f).find("span").text(""),$("#space-"+f).find("span").css({color:"#e0f2f1"});"player"===u?(this.enableHover(),i="player",t.text("Your turn")):(this.disableHover(),i="cpu",t.text("Thinking..."),this.cpuTurn())}}};$(document).ready(function(){var t=new TicTacToe,e="X",a="O",r="X",i="O",s="easy";t.newGame(s,e,a,"player"),$(".container").on("click",function(){var e=$(this).data("id");t.canMove()&&t.isLegalMove(e)&&t.markSpace(t.getPlayerMarker(),e)}),$(".new-game-btn").on("click",function(){t.newGame(s,r,i,$(this).data("first"))}),$(".marker-btn").on("click",function(){var t=$(this).text();"X"===t?(r="O",i="X",$(this).text("O")):(r="X",i="O",$(this).text("X"))}),$(".difficulty-btn").on("click",function(){"easy"===s?(s="hard",$(this).text("Hard")):(s="easy",$(this).text("Easy"))})});