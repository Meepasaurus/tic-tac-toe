"use strict";var TicTacToe=function(){var e=$("#status"),r="",n="",a="",t=null,o=[1,2,3,4,5,6,7,8,9],s=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]],c=function(){return{1:{rows:[0,3,6],marker:"-"},2:{rows:[0,4],marker:"-"},3:{rows:[0,5,7],marker:"-"},4:{rows:[1,3],marker:"-"},5:{rows:[1,4,6,7],marker:"-"},6:{rows:[1,5],marker:"-"},7:{rows:[2,3,7],marker:"-"},8:{rows:[2,4],marker:"-"},9:{rows:[2,5,6],marker:"-"}}},i={};return{cpuTurn:function(){var e=o[Math.floor(Math.random()*o.length)];this.markSpace(n,e)},checkRow:function(r){var a=s[r],o=i[a[0]].marker,c=i[a[1]].marker,l=i[a[2]].marker;if(console.log("Checking "+a),o===c&&o===l){o===n?e.text("You lose!"):e.text("You win!");for(var u=0;u<3;u++)$("#space-"+a[u]).find("span").css({color:"#ee6e73"});t=null}else console.log("Not yet...")},markSpace:function(r,n){console.log("> Marking space "+n+" with "+r),i[n].marker=r,$("#space-"+n).find("span").text(r),o.splice(o.indexOf(n),1);for(var a=i[n].rows,s=0,c=a.length;s<c;s++)this.checkRow(a[s]);"player"===t?(this.disableHover(),t="cpu",0===o.length?(e.text("NOBODY WINS."),t=null):(e.text("Thinking..."),this.cpuTurn())):"cpu"===t?0===o.length?(e.text("NOBODY WINS."),t=null):(this.enableHover(),t="player",e.text("Your turn.")):null===t&&this.disableHover()},enableHover:function(){for(var e=1;e<=9;e++)"-"===i[e].marker&&$("#space-"+e).addClass("space-hover")},disableHover:function(){for(var e=1;e<=9;e++)$("#space-"+e).removeClass("space-hover")},getPlayerMarker:function(){return r},isLegalMove:function(e){return o.indexOf(e)!==-1},canMove:function(){return"player"===t},printCurrentBoard:function(){for(var e="",r=1;r<=9;r++)e+=i[r].marker,r%3===0&&(e+="\n");console.log(e)},newGame:function(s,l,u,f){i=new c,o=[1,2,3,4,5,6,7,8,9];for(var k=1;k<=9;k++)$("#space-"+k).find("span").text(""),$("#space-"+k).find("span").css({color:"#e0f2f1"});a=s,r=l,n=u,console.log("Starting new "+a+" game.\nPlayer:"+r+" CPU:"+n+"\n"+f+" goes first."),"player"===f?(this.enableHover(),t="player",e.text("Your turn.")):(t="cpu",e.text("Thinking..."),this.cpuTurn())}}};$(document).ready(function(){var e=new TicTacToe,r="X",n="O",a="X",t="O";e.newGame("easy",r,n,"player"),$(".container").on("click",function(){var r=$(this).data("id");e.canMove()&&e.isLegalMove(r)&&e.markSpace(e.getPlayerMarker(),r)}),$(".new-game-btn").on("click",function(){e.newGame("easy",a,t,$(this).data("first"))}),$(".marker-btn").on("click",function(){var e=$(this).text();"X"===e?(a="O",t="X",$(this).text("O")):(a="X",t="O",$(this).text("X"))})});